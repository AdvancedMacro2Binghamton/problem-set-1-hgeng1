--------------------------------------------------------------------------------
      name:  <unnamed>
       log:  D:\GOOGLE DRIVE\Fall2017\Advanced Macro\hw1\hw1_2007scf.log
  log type:  text
 opened on:   7 Sep 2017, 01:10:34

. do "D:\GOOGLE DRIVE\Fall2017\Advanced Macro\hw1\HW1.do"

. *************************Advanced Macro HW1**********************
. *************************Huayan Geng************************
. **Install pctile.ado, ineqdec0.ado and glcurve.ado before run this file****
.  use "D:\GOOGLE DRIVE\Fall2017\Advanced Macro\hw1\rscfp2007.dta", clear

.  ***Take the weight as consideration instead of delete the duplication
.  ***Generate EARNINGS INCOME WEALTH
.  gen INF=1.1228 

.         ***INF is inflation adjustment factor found in Federal Reserve Bulleti
> n|September 2014
.         ***Report on SCF website
.  gen EARNING= (wageinc+0.863*bussefarminc)/INF

.  gen WEALTH=networth/INF

.  gen INCOME=(wageinc+bussefarminc+intdivinc+kginc+ssretinc+transfothinc)/INF

.  gen EARNING_LOG=log(EARNING)
(3,314 missing values generated)

.  gen WEALTH_LOG=log(WEALTH)
(1,657 missing values generated)

.  gen INCOME_LOG=log(INCOME)
(71 missing values generated)

.  
.  ************Table 1 percentile********
.  tabstat EARNING INCOME WEALTH [aweight=wgt], statistics(min max p1 p5 p10 med
> ian p75 p90 p95 p99)

   stats |   EARNING    INCOME    WEALTH
---------+------------------------------
     min |  -1546506 -505749.8 -473698.1
     max |  1.62e+08  1.87e+08  1.41e+09
      p1 |         0  4216.295 -31259.88
      p5 |         0  8926.206 -4599.982
     p10 |         0  12340.38  29.99988
     p50 |  37021.13  47304.78  120999.5
     p75 |  75070.63  85559.95  372748.5
     p90 |  126066.2  141986.3  910296.4
     p95 |  180158.2  207215.5   1900163
     p99 |  496988.1  680684.9   8374507
----------------------------------------

.  ***plus more percentile 20 40 60 80
.  pctile EARNING_PC=EARNING [aweight=wgt],nq(5) genp(earnpct)

.  pctile INCOME_PC=INCOME [aweight=wgt],nq(5) genp(incpct)

.  pctile WEALTH_PC=WEALTH [aweight=wgt],nq(5) genp(wlthpct)

.  list EARNING_PC earnpct in 1/4

     +--------------------+
     | EARNIN~C   earnpct |
     |--------------------|
  1. |        0        20 |
  2. | 25709.12        40 |
  3. | 50389.87        60 |
  4. | 87478.67        80 |
     +--------------------+

.  list INCOME_PC incpct in 1/4

     +-------------------+
     | INCOME~C   incpct |
     |-------------------|
  1. |  20063.4       20 |
  2. | 36301.27       40 |
  3. | 58822.46       60 |
  4. | 98723.02       80 |
     +-------------------+

.  list WEALTH_PC wlthpct in 1/4

     +--------------------+
     | WEALTH~C   wlthpct |
     |--------------------|
  1. | 7329.971        20 |
  2. | 64914.74        40 |
  3. | 197899.2        60 |
  4. |   496898        80 |
     +--------------------+

.  
.  ***********Table 2 Concentration and Skewness**********
.  *coeffient of variation, mean, media, top 1%
.  tabstat EARNING INCOME WEALTH [aweight=wgt], statistics(mean cv median p99)

   stats |   EARNING    INCOME    WEALTH
---------+------------------------------
    mean |  63823.36  83589.88    556800
      cv |  3.605025  4.317153  6.009249
     p50 |  37021.13  47304.78  120999.5
     p99 |  496988.1  680684.9   8374507
----------------------------------------

.  
.  *location of mean: by comparing mean with ._PC2 value to find corresponding .
> pct2
.  pctile EARNING_PC2=EARNING [aweight=wgt],nq(100) genp(earnpct2)

.  pctile INCOME_PC2=INCOME [aweight=wgt],nq(100) genp(incpct2)

.  pctile WEALTH_PC2=WEALTH [aweight=wgt],nq(100) genp(wlthpct2)

.  list EARNING_PC2 earnpct2 in 1/100

     +---------------------+
     | EARNIN~2   earnpct2 |
     |---------------------|
  1. |        0          1 |
  2. |        0          2 |
  3. |        0          3 |
  4. |        0          4 |
  5. |        0          5 |
     |---------------------|
  6. |        0          6 |
  7. |        0          7 |
  8. |        0          8 |
  9. |        0          9 |
 10. |        0         10 |
     |---------------------|
 11. |        0         11 |
 12. |        0         12 |
 13. |        0         13 |
 14. |        0         14 |
 15. |        0         15 |
     |---------------------|
 16. |        0         16 |
 17. |        0         17 |
 18. |        0         18 |
 19. |        0         19 |
 20. |        0         20 |
     |---------------------|
 21. | 1336.874         21 |
 22. | 3085.094         22 |
 23. | 4319.132         23 |
 24. | 5324.873         24 |
 25. | 6787.207         25 |
     |---------------------|
 26. | 8329.754         26 |
 27. | 9872.302         27 |
 28. | 10283.65         28 |
 29. | 12340.38         29 |
 30. | 13368.74         30 |
     |---------------------|
 31. | 15425.47         31 |
 32. | 15974.62         32 |
 33. |  17482.2         33 |
 34. | 18510.56         34 |
 35. | 20567.29         35 |
     |---------------------|
 36. | 21595.66         36 |
 37. | 22624.02         37 |
 38. | 23652.39         38 |
 39. | 25709.12         39 |
 40. | 25709.12         40 |
     |---------------------|
 41. | 26737.48         41 |
 42. | 27765.85         42 |
 43. | 28794.21         43 |
 44. | 30512.61         44 |
 45. | 30850.94         45 |
     |---------------------|
 46. | 31879.31         46 |
 47. | 32907.67         47 |
 48. |  34964.4         48 |
 49. | 35992.77         49 |
 50. | 37021.13         50 |
     |---------------------|
 51. |  38049.5         51 |
 52. | 39077.86         52 |
 53. | 41134.59         53 |
 54. | 41134.59         54 |
 55. | 43191.32         55 |
     |---------------------|
 56. | 44219.68         56 |
 57. | 46276.41         57 |
 58. | 47304.78         58 |
 59. | 49246.13         59 |
 60. | 50389.87         60 |
     |---------------------|
 61. | 51418.24         61 |
 62. |  52446.6         62 |
 63. | 53474.96         63 |
 64. |  55531.7         64 |
 65. | 56560.06         65 |
     |---------------------|
 66. | 58278.46         66 |
 67. | 59645.16         67 |
 68. | 61701.88         68 |
 69. | 63110.74         69 |
 70. | 65622.32         70 |
     |---------------------|
 71. | 66843.71         71 |
 72. | 68900.44         72 |
 73. | 71985.53         73 |
 74. |  73013.9         74 |
 75. | 75070.63         75 |
     |---------------------|
 76. | 77127.35         76 |
 77. | 80212.45         77 |
 78. | 82269.18         78 |
 79. | 85354.27         79 |
 80. | 87478.67         80 |
     |---------------------|
 81. | 92186.73         81 |
 82. | 94609.55         82 |
 83. | 97694.65         83 |
 84. | 100779.7         84 |
 85. | 102836.5         85 |
     |---------------------|
 86. | 106497.5         86 |
 87. |   110907         87 |
 88. | 116205.2         88 |
 89. | 123359.5         89 |
 90. | 126066.2         90 |
     |---------------------|
 91. | 133687.4         91 |
 92. | 143971.1         92 |
 93. | 154254.7         93 |
 94. | 164538.4         94 |
 95. | 180158.2         95 |
     |---------------------|
 96. |   205673         96 |
 97. | 237213.9         97 |
 98. | 298662.8         98 |
 99. | 496988.1         99 |
100. |        .          . |
     +---------------------+

.  list INCOME_PC2 incpct2 in 1/100

     +--------------------+
     | INCOME~2   incpct2 |
     |--------------------|
  1. | 4216.295         1 |
  2. | 6170.188         2 |
  3. |  7301.39         3 |
  4. | 8021.245         4 |
  5. | 8926.206         5 |
     |--------------------|
  6. | 9563.792         6 |
  7. | 10283.65         7 |
  8. | 10797.83         8 |
  9. | 11312.01         9 |
 10. | 12340.38        10 |
     |--------------------|
 11. | 12391.79        11 |
 12. | 13368.74        12 |
 13. | 14397.11        13 |
 14. | 15425.47        14 |
 15. |    16351        15 |
     |--------------------|
 16. | 16968.02        16 |
 17. | 17687.87        17 |
 18. | 18510.56        18 |
 19. | 19538.93        19 |
 20. |  20063.4        20 |
     |--------------------|
 21. | 20567.29        21 |
 22. | 21595.66        22 |
 23. | 22624.02        23 |
 24. | 23652.39        24 |
 25. | 23858.06        25 |
     |--------------------|
 26. | 24680.75        26 |
 27. | 25709.12        27 |
 28. |  26223.3        28 |
 29. | 27148.83        29 |
 30. |  28300.6        30 |
     |--------------------|
 31. | 28794.21        31 |
 32. | 29822.58        32 |
 33. | 30850.94        33 |
 34. | 30933.21        34 |
 35. | 31879.31        35 |
     |--------------------|
 36. | 32907.67        36 |
 37. | 33936.04        37 |
 38. |  34964.4        38 |
 39. | 35992.77        39 |
 40. | 36301.27        40 |
     |--------------------|
 41. | 37021.13        41 |
 42. |  38049.5        42 |
 43. | 39077.86        43 |
 44. | 41133.56        44 |
 45. | 41134.59        45 |
     |--------------------|
 46. | 42162.95        46 |
 47. | 43191.32        47 |
 48. | 44723.58        48 |
 49. | 46276.41        49 |
 50. | 47304.78        50 |
     |--------------------|
 51. | 48333.14        51 |
 52. | 49361.51        52 |
 53. | 50389.87        53 |
 54. | 51418.24        54 |
 55. |  52446.6        55 |
     |--------------------|
 56. | 53783.48        56 |
 57. |  55531.7        57 |
 58. | 56560.06        58 |
 59. | 57588.43        59 |
 60. | 58822.46        60 |
     |--------------------|
 61. | 60673.52        61 |
 62. | 61701.88        62 |
 63. | 63758.61        63 |
 64. | 65301.16        64 |
 65. | 66843.71        65 |
     |--------------------|
 66. | 68900.44        66 |
 67. | 70607.52        67 |
 68. | 71985.53        68 |
 69. |  73013.9        69 |
 70. | 75070.63        70 |
     |--------------------|
 71. | 77127.35        71 |
 72. | 78155.72        72 |
 73. | 81240.81        73 |
 74. | 82783.36        74 |
 75. | 85559.95        75 |
     |--------------------|
 76. | 88223.41        76 |
 77. | 91318.79        77 |
 78. | 93581.19        78 |
 79. | 95895.01        79 |
 80. | 98723.02        80 |
     |--------------------|
 81. | 102836.5        81 |
 82. | 105016.6        82 |
 83. | 107978.3        83 |
 84. | 111248.5        84 |
 85. | 114199.9        85 |
     |--------------------|
 86. | 119136.1        86 |
 87. | 123403.8        87 |
 88. | 127414.4        88 |
 89. | 133687.4        89 |
 90. | 141986.3        90 |
     |--------------------|
 91. | 151169.6        91 |
 92. | 161062.5        92 |
 93. | 173824.5        93 |
 94. | 190247.5        94 |
 95. | 207215.5        95 |
     |--------------------|
 96. | 241151.5        96 |
 97. | 287942.1        97 |
 98. | 388927.5        98 |
 99. | 680684.9        99 |
100. |        .         . |
     +--------------------+

.  list WEALTH_PC2 wlthpct2 in 1/100

     +----------------------+
     | WEALTH_~2   wlthpct2 |
     |----------------------|
  1. | -31259.88          1 |
  2. | -18799.93          2 |
  3. | -10739.96          3 |
  4. | -7099.972          4 |
  5. | -4599.982          5 |
     |----------------------|
  6. | -1969.992          6 |
  7. | -769.9969          7 |
  8. |         0          8 |
  9. |         0          9 |
 10. |  29.99988         10 |
     |----------------------|
 11. |  309.9988         11 |
 12. |  949.9963         12 |
 13. |  1599.994         13 |
 14. |  2219.991         14 |
 15. |  2999.988         15 |
     |----------------------|
 16. |  3759.985         16 |
 17. |  4629.982         17 |
 18. |  5499.979         18 |
 19. |  6349.975         19 |
 20. |  7329.971         20 |
     |----------------------|
 21. |  8199.968         21 |
 22. |  9799.961         22 |
 23. |  11249.96         23 |
 24. |  12579.95         24 |
 25. |  14149.94         25 |
     |----------------------|
 26. |  16239.94         26 |
 27. |  18629.93         27 |
 28. |  20699.92         28 |
 29. |  23699.91         29 |
 30. |  26549.89         30 |
     |----------------------|
 31. |  29579.88         31 |
 32. |  32779.87         32 |
 33. |  36300.86         33 |
 34. |  39999.84         34 |
 35. |  43689.83         35 |
     |----------------------|
 36. |  48329.81         36 |
 37. |  52219.79         37 |
 38. |  56309.78         38 |
 39. |  60299.76         39 |
 40. |  64914.74         40 |
     |----------------------|
 41. |  69799.73         41 |
 42. |   74199.7         42 |
 43. |  78529.69         43 |
 44. |  85399.66         44 |
 45. |  90759.64         45 |
     |----------------------|
 46. |  96399.62         46 |
 47. |  101599.6         47 |
 48. |  107099.6         48 |
 49. |  113449.6         49 |
 50. |  120999.5         50 |
     |----------------------|
 51. |  128399.5         51 |
 52. |  133999.5         52 |
 53. |  141039.4         53 |
 54. |  146959.4         54 |
 55. |  155599.4         55 |
     |----------------------|
 56. |  163219.4         56 |
 57. |  171330.3         57 |
 58. |  179999.3         58 |
 59. |  189439.3         59 |
 60. |  197899.2         60 |
     |----------------------|
 61. |  208199.2         61 |
 62. |  215999.1         62 |
 63. |  225499.1         63 |
 64. |  235599.1         64 |
 65. |    243789         65 |
     |----------------------|
 66. |    252399         66 |
 67. |    262699         67 |
 68. |  276718.9         68 |
 69. |  287498.9         69 |
 70. |  300298.8         70 |
     |----------------------|
 71. |  312768.8         71 |
 72. |  326198.7         72 |
 73. |  337798.7         73 |
 74. |  355498.6         74 |
 75. |  372748.5         75 |
     |----------------------|
 76. |  388768.5         76 |
 77. |  410598.4         77 |
 78. |  438998.3         78 |
 79. |  463798.2         79 |
 80. |    496898         80 |
     |----------------------|
 81. |  526397.9         81 |
 82. |  561997.8         82 |
 83. |  584497.7         83 |
 84. |  620397.6         84 |
 85. |  655697.4         85 |
     |----------------------|
 86. |  689647.3         86 |
 87. |  733917.1         87 |
 88. |  780596.9         88 |
 89. |  832646.7         89 |
 90. |  910296.4         90 |
     |----------------------|
 91. |   1000796         91 |
 92. |   1101577         92 |
 93. |   1203095         93 |
 94. |   1495894         94 |
 95. |   1900163         95 |
     |----------------------|
 96. |   2385691         96 |
 97. |   3183988         97 |
 98. |   4638482         98 |
 99. |   8374507         99 |
100. |         .          . |
     +----------------------+

.  
.  *Variance of the logs 
.  tabstat EARNING_LOG INCOME_LOG WEALTH_LOG[aweight=wgt], statistics(variance)

   stats |  EARNI~OG  INCOME~G  WEALTH~G
---------+------------------------------
variance |   1.28824  .9927662  4.532126
----------------------------------------

.  
.  *mean/median calculated by calculator
.  *Top 1%/ lowest 40% calculated by calculator
.  
.  *Gini index
.  ineqdec0 EARNING [aweight=wgt]
 
Warning: EARNING has 244 values < 0. Used in calculations
 
Warning: EARNING has 3070 values = 0. Used in calculations
Note: p10 (and smaller percentiles) <= 0
 
Percentile ratios

----------------------------------------------------------
  All obs |    p90/p10     p90/p50     p10/p50     p75/p25
----------+-----------------------------------------------
          |                  3.405       0.000      11.061
----------------------------------------------------------
  
Generalized Entropy index GE(2), and Gini coefficient

----------------------------------
  All obs |      GE(2)        Gini
----------+-----------------------
          |    6.49781     0.63585
----------------------------------

.  ineqdec0 INCOME [aweight=wgt]
 
Warning: INCOME has 41 values < 0. Used in calculations
 
Warning: INCOME has 30 values = 0. Used in calculations
 
Percentile ratios

----------------------------------------------------------
  All obs |    p90/p10     p90/p50     p10/p50     p75/p25
----------+-----------------------------------------------
          |     11.506       3.002       0.261       3.586
----------------------------------------------------------
  
Generalized Entropy index GE(2), and Gini coefficient

----------------------------------
  All obs |      GE(2)        Gini
----------+-----------------------
          |    9.31848     0.57499
----------------------------------

.  ineqdec0 WEALTH [aweight=wgt]
 
Warning: WEALTH has 1322 values < 0. Used in calculations
 
Warning: WEALTH has 335 values = 0. Used in calculations
Note: p5 (and smaller percentiles) <= 0
 
Percentile ratios

----------------------------------------------------------
  All obs |    p90/p10     p90/p50     p10/p50     p75/p25
----------+-----------------------------------------------
          |  30343.332       7.523       0.000      26.343
----------------------------------------------------------
  
Generalized Entropy index GE(2), and Gini coefficient

----------------------------------
  All obs |      GE(2)        Gini
----------+-----------------------
          |   18.05472     0.81616
----------------------------------

. 
.  *******************Lorenz Curve**************************
.  glcurve EARNING [aweight=wgt] if EARNING>=0, gl(gl_e) p(p_e) lorenz nograph
new variable gl_e created
new variable p_e created

.  twoway line gl_e p_e , sort || line p_e p_e ,xlabel(0(.1)1) ylabel(0(.1)1) xl
> ine(0(.2)1) yline(0(.2)1) title("Lorenz curve of Earning") legend(label(1 "Lor
> enz curve") label(2 "Line of perfect equality")) plotregion(margin(zero)) aspe
> ctratio(1) scheme(economist)

. 
.  glcurve INCOME [aweight=wgt] if INCOME>=0, gl(gl_i) p(p_i) lorenz nograph
new variable gl_i created
new variable p_i created

.  twoway line gl_i p_i , sort || line p_i p_i ,xlabel(0(.1)1) ylabel(0(.1)1) xl
> ine(0(.2)1) yline(0(.2)1) title("Lorenz curve of Income") legend(label(1 "Lore
> nz curve") label(2 "Line of perfect equality")) plotregion(margin(zero)) aspec
> tratio(1) scheme(economist)

. 
.  glcurve WEALTH [aweight=wgt] if WEALTH>=0, gl(gl_w) p(p_w) lorenz nograph
new variable gl_w created
new variable p_w created

.  twoway line gl_w p_w , sort || line p_w p_w ,xlabel(0(.1)1) ylabel(0(.1)1) xl
> ine(0(.2)1) yline(0(.2)1) title("Lorenz curve of Wealth") legend(label(1 "Lore
> nz curve") label(2 "Line of perfect equality")) plotregion(margin(zero)) aspec
> tratio(1) scheme(economist)

. 
end of do-file

.  log close
      name:  <unnamed>
       log:  D:\GOOGLE DRIVE\Fall2017\Advanced Macro\hw1\hw1_2007scf.log
  log type:  text
 closed on:   7 Sep 2017, 01:10:59
--------------------------------------------------------------------------------
